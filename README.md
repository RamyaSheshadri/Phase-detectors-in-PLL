# Phase Detectors in PLL

### Overview

This is a continuation of the previous project where we did a **comparative analysis of PLL in 45nm and 180nm technology**.

- We had built a **basic block diagram of Phase Locked Loops in Cadence Virtuoso**.
- One of the drawbacks we observed in that project was:
  - While **XOR gate** can be used as a Phase Detector for simplicity,
  - It **limits the phase detection range from 0–180 degrees**.
  - Beyond this phase difference, we observed that the **output was not accurate**.
  - Presence of dead zones.

---
Dead zones are regions of phase difference where the output of the Phase Detector doesn’t change (or gives no useful info) — meaning it can’t detect small changes in phase.
For phase difference near 0° or 180°, the XOR output becomes flat — giving very little/no change in output.
### Improvement in This Project

To overcome the above drawback, we proposed:

#### 1. TSPC-Based Phase Detector
- TSPC helps **increase the phase detection range up to 360 degrees**.
- It overcomes the limitation of XOR and gives **more accurate output over the full range**.
- Minimizes the dead zones.

#### 2. Novel MUX-Based Phase Detector
- We came up with a **new idea** of using a **MUX-based Phase Detector**.
- This design **incorporates the best of both XOR and TSPC**, hence optimizing the circuit.
- Selection between the two is done using a **D Flip-Flop**.

---

### Working Logic

- A **D Flip-Flop** is used to generate a **select line (SEL)**.
- Based on the value of `SEL`, the corresponding Phase Detector is chosen:

| SEL | Phase Detector Selected | Implies...                        |
|-----|--------------------------|----------------------------------|
| 0   | XOR Gate                 | Phase difference is 0–180°       |
| 1   | TSPC Circuit             | Phase difference is 180–360°     |

---

###  Why This Works

-  **If SEL = 0**:
  - XOR gate is used.
  - This makes the circuitry **simpler**, as XOR logic is **basic** and easy to implement.

- **If SEL = 1**:
  - TSPC circuit is chosen.
  - This helps in **minimizing the dead zones** which were observed earlier.

---

## Basic working of a 2x1 Multiplexer:

###  Basic Working of 2×1 Multiplexer (MUX)

A **2×1 MUX** (2-input, 1-output multiplexer) is a digital circuit that **selects one of two input signals** based on the value of a **single select line (SEL)**.

#### Inputs:
- **IN0** → First input
- **IN1** → Second input
- **SEL** → Select signal

####  Output:
- **OUT** → Output based on SEL

####  Logic Table:

| SEL | OUT  |
|-----|------|
| 0   | IN0  |
| 1   | IN1  |

- When **SEL = 0**, the MUX forwards **IN0** to the output.
- When **SEL = 1**, the MUX forwards **IN1** to the output.

####  In Our Design:
- **IN0 = XOR-based Phase Detector output**
- **IN1 = TSPC-based Phase Detector output**
- **SEL is generated by a D Flip-Flop**
- Based on `SEL`, the MUX dynamically selects the appropriate phase detector output.

This helps in **switching between XOR and TSPC detectors**, depending on the phase range, to **optimize accuracy and reduce dead zones**.


### Schematic:
![mux 2x1 pt 2](https://github.com/user-attachments/assets/6bf1143a-d299-411a-b896-6dc8913fce89)

### Block diagram:
![mux 2x1 pt 3](https://github.com/user-attachments/assets/3c976abd-26f0-4070-ba52-bb82f65fbbbc)

### Output waveform:
![mux 2x1 pt1](https://github.com/user-attachments/assets/76c6af76-d195-421b-ac01-94c722d25227)



## TSPC circuit:

### Basic Working of TSPC Phase Detector

TSPC stands for **True Single Phase Clocking** — a design style commonly used in **high-speed digital circuits**, especially in **phase detectors** and **flip-flops**.

#### Key Features:
- Uses **only one clock signal** (no clock inversion or multiple phases)
- Works at **high frequencies** with **low power consumption**
- Eliminates race conditions seen in traditional dynamic logic

---

###  Working Principle:

- TSPC logic typically uses **dynamic logic** with **precharge and evaluate phases** controlled by a **single clock**.
- The circuit consists of **NMOS and PMOS transistors** arranged such that:
  - When **clock is low** → Precharge phase (output node gets precharged)
  - When **clock is high** → Evaluate phase (circuit evaluates input logic and updates output)

---

###  In Our Project:

- We used a **TSPC-based Phase Detector** to detect phase differences between two input signals.
- Unlike XOR, it can detect **phase differences from 0° to 360°**.
- The dynamic logic in TSPC ensures **fast switching** and **accurate edge detection**.

---

###  Why TSPC is Better Here:

- **No dead zones** → Full 0–360° phase detection range
- **High speed** → Ideal for faster PLL locking
- **Less clock complexity** → Only one phase of clock needed
- Helps maintain **low power** and **compact layout**

### Schematic:
![tspc pt 2](https://github.com/user-attachments/assets/4d406c15-cc9e-4795-91df-93780d551521)

### Block diagram:
![tspc pt 3](https://github.com/user-attachments/assets/5e4efa03-c861-420f-8c97-d0b4487384e6)

### Output waveform:
![tspc pt 1](https://github.com/user-attachments/assets/248a6115-2f40-41c6-8783-0bc6ef2f0ecf)

### At 0 degree delay:
![tspc 0 deg delay](https://github.com/user-attachments/assets/85ee34a9-6423-496c-921f-568993cba77f)

### At 270 degree delay:
![tspc 270  ps](https://github.com/user-attachments/assets/24e3d61a-dc1a-455b-9f07-b61cd0c02494)



### Summary

> This project enhances the original PLL design by addressing phase detection limitations using a hybrid XOR + TSPC approach, selected through a novel DFF-controlled MUX setup.

---

